# Upmo 拡張機能ドキュメント

## 概要

Upmoは柔軟なカスタマイズ機能により、業種・規模を問わず様々なビジネスニーズに対応できるビジネス管理プラットフォームです。

### 主な機能

#### **1. 業種別カスタマイズ**
- **複数業種対応**: 1つのアカウントで複数の業種を選択可能
- **自動テンプレート生成**: 業種選択に応じて最適化されたテンプレートを自動生成
- **デフォルトコンポーネント**: 各テンプレートにすぐ使えるコンポーネントが自動で配置

#### **2. カスタムページビルダー**
- **柔軟なコンポーネント**: データテーブル、フォーム、カレンダー、テキスト
- **リアルタイム編集**: コンポーネントの追加・削除・編集が可能
- **バックアップ**: Firestoreに自動保存でデータ紛失の心配なし

#### **3. 拡張機能システム**
- **豊富な拡張機能**: AI分析、システム連携、ワークフロー自動化
- **業種別最適化**: 各業種に最適化された拡張機能を自動提案
- **柔軟な組み合わせ**: 必要な機能だけを選択

## 拡張機能の種類

#### 1. **AI・分析機能**
- **AIチャット**: 自然言語での質問応答システム
- **売上予測**: 機械学習による売上予測分析
- **顧客分析**: RFM分析と顧客セグメンテーション

#### 2. **システム連携**
- **SAP連携**: SAP ERPシステムとのデータ同期
- **POS連携**: POSシステムとの売上データ同期
- **CRM連携**: Salesforce、HubSpotとの連携
- **会計システム連携**: QuickBooks、弥生会計との連携

#### 3. **ワークフロー・自動化**
- **承認ワークフロー**: 文書・請求の承認プロセス自動化
- **タスク自動化**: 繰り返しタスクの自動実行
- **通知システム**: メール・Slack・Teams通知

#### 4. **データ可視化**
- **高度なチャート**: インタラクティブなデータ可視化
- **ダッシュボードビルダー**: ドラッグ&ドロップでダッシュボード作成
- **レポート生成**: 自動レポート生成と配信

#### 5. **セキュリティ・コンプライアンス**
- **監査ログ**: 全操作の詳細ログ記録
- **データ暗号化**: 保存データの完全暗号化
- **コンプライアンスツール**: GDPR、HIPAA対応ツール

#### 6. **モバイル・API**
- **モバイルアプリ**: iOS・Android ネイティブアプリ
- **API アクセス**: RESTful API による外部連携

### セットアップ手順

#### 1. **初期設定での自動セットアップ**

**Step 1: 会社情報の入力**
- 会社名、チーム規模を入力

**Step 2: 業種の選択（複数選択可）**
- 製造業、小売業、サービス業、建設業、医療業、その他から選択
- 複数の業種を選択することで、統合されたビジネス管理が可能
- 例: 「製造業」+「小売業」→ 製造から販売まで一元管理

**Step 3: 機能の選択**
- 選択した業種に応じて推奨機能が自動表示
- その他の機能も追加選択可能

**自動生成される内容:**
- 業種別テンプレートページの作成
- デフォルトコンポーネントの自動配置
- 最適化されたデータ構造

**デフォルトコンポーネントの例:**
- **製造業** → 生産計画、品質管理、在庫管理
- **小売業** → 売上分析、顧客管理、商品管理
- **サービス業** → 予約管理（カレンダー）、スタッフ管理、顧客満足度
- **建設業** → プロジェクト管理、資材管理、安全管理
- **医療業** → 患者管理、診療予約（カレンダー）、医療機器管理

#### 2. **カスタムページの作成**

**テンプレートページにデフォルトコンポーネントが自動配置されます。**

**利用可能なコンポーネント:**
- **データテーブル**: 列設定、データ入力、フィルタリング
- **フォーム**: 入力フィールドのカスタマイズ、バリデーション
- **カレンダー**: イベント管理、月/週/日表示
- **テキスト**: マークダウン、スタイル設定

**カスタマイズ手順:**
1. テンプレートページを開く
2. 既存コンポーネントを編集（データ追加・列の変更など）
3. 新しいコンポーネントを追加
4. 変更は自動保存

**注意: グラフ機能は削除されました**
- JSON入力のUX問題を解決
- より使いやすいデータテーブルに統一
- 必要に応じて外部BIツールと連携

#### 3. **拡張機能の設定**

**拡張機能ページ（`/extensions`）で個別設定：**

```bash
# 拡張機能ページにアクセス
https://your-domain.com/extensions
```

**設定手順：**
1. 必要な拡張機能を選択
2. 「有効化」ボタンをクリック
3. 設定画面で接続情報を入力
4. テスト接続で動作確認
5. データ同期の設定

#### 4. **外部システム連携の設定**

**SAP連携の例：**
```bash
# SAP接続設定
SAP_HOST=your-sap-server.com
SAP_CLIENT=100
SAP_USER=your-username
SAP_PASSWORD=your-password
SAP_LANGUAGE=JA
```

**POS連携の例：**
```bash
# POS API設定
POS_API_URL=https://your-pos-system.com/api
POS_API_KEY=your-api-key
POS_STORE_ID=your-store-id
```

**CRM連携の例：**
```bash
# Salesforce連携設定
SALESFORCE_USERNAME=your-username
SALESFORCE_PASSWORD=your-password
SALESFORCE_SECURITY_TOKEN=your-token
SALESFORCE_DOMAIN=login.salesforce.com
```

### 業種別推奨設定

#### **製造業向け**
```
推奨拡張機能:
✅ SAP連携 (必須)
✅ 品質管理システム
✅ IoTセンサー連携
✅ 予知保全システム
✅ 生産計画最適化

設定例:
- 生産計画データの自動同期
- 品質検査結果のリアルタイム監視
- 設備稼働状況の可視化
- メンテナンススケジュールの自動生成
```

#### **小売業向け**
```
推奨拡張機能:
✅ POS連携 (必須)
✅ ECサイト連携
✅ 顧客分析システム
✅ 在庫最適化
✅ プロモーション管理

設定例:
- 売上データのリアルタイム同期
- 在庫レベルの自動調整
- 顧客セグメント別の分析
- キャンペーンの効果測定
```

#### **サービス業向け**
```
推奨拡張機能:
✅ 予約システム連携 (必須)
✅ 決済システム連携
✅ CRM連携
✅ レビューシステム
✅ スタッフ管理

設定例:
- 予約と決済の自動連携
- 顧客満足度の追跡
- スタッフスケジュールの最適化
- サービス品質の向上
```

### 高度な設定

#### **Python API との連携**
```python
# Python API サーバーの設定
from fastapi import FastAPI
import pandas as pd
from sklearn.ensemble import RandomForestRegressor

app = FastAPI()

@app.post("/api/analyze-sales")
async def analyze_sales(sales_data: dict):
    # 売上分析処理
    df = pd.DataFrame(sales_data['data'])
    model = RandomForestRegressor()
    prediction = model.predict(df)
    
    return {
        "prediction": prediction.tolist(),
        "confidence": 0.85,
        "recommendations": generate_recommendations(df)
    }
```

#### **カスタムワークフローの作成**
```typescript
// カスタムワークフローの例
interface WorkflowStep {
  id: string;
  name: string;
  type: 'approval' | 'notification' | 'data_entry';
  assignee: string;
  conditions: ConditionRule[];
}

const createApprovalWorkflow = (steps: WorkflowStep[]) => {
  // 承認ワークフローの作成
  return {
    id: generateId(),
    name: 'Document Approval',
    steps: steps,
    createdAt: new Date()
  };
};
```

### トラブルシューティング

#### **よくある問題と解決方法**

**1. 接続エラー**
```
問題: 外部システムに接続できない
解決方法:
- APIキーが正しいか確認
- ネットワーク接続を確認
- ファイアウォール設定を確認
- ログファイルでエラー詳細を確認
```

**2. データ同期エラー**
```
問題: データが正しく同期されない
解決方法:
- データ形式を確認
- マッピング設定を確認
- 同期スケジュールを確認
- 手動同期でテスト
```

**3. パフォーマンス問題**
```
問題: 処理が遅い
解決方法:
- データ量を確認
- インデックス設定を確認
- キャッシュ設定を確認
- サーバーリソースを確認
```

### 料金体系

#### **拡張機能の料金**
- **無料**: 基本機能、AIチャット、通知システム
- **プレミアム**: 高度な分析、システム連携、ワークフロー
- **エンタープライズ**: カスタム開発、専用サポート、SLA保証

#### **使用量ベースの課金**
- **API呼び出し**: 1,000回/月まで無料
- **データ同期**: 10,000レコード/月まで無料
- **ストレージ**: 1GBまで無料

### サポート

#### **サポートチャンネル**
- **ドキュメント**: `/docs/extensions`
- **コミュニティ**: `/community`
- **サポートチケット**: `/support`
- **技術サポート**: エンタープライズプランのみ

#### **開発者向けリソース**
- **API ドキュメント**: `/api/docs`
- **SDK**: GitHub で公開
- **サンプルコード**: `/examples`
- **ベストプラクティス**: `/best-practices`

### 商用拡張パック（開発中・今後実装予定）

Upmoは、業種別に最適化された「拡張パック」を提供します。基本的なUpmoでは対応できない特定の業務ニーズに応えるための追加モジュールです。

### 🎯 まずはこれだけ！「パン屋セットアップパック」（¥30,000/月）

**迷わない！これ1つで完結する基本パック**

小規模店が本当に必要な機能だけをまとめました：
1. **在庫管理**: 原材料の在庫切れアラート
2. **売上記録**: レシート写メで自動入力
3. **人気商品分析**: 何が売れたか自動で見える化
4. **発注通知**: バターが少なくなったら自動通知

→ **¥30,000/月で全部使える**

他の機能は後から追加すればOK！

#### **パック1: 在庫・原価アラートパック**（予定価格: 月額+¥5,000）

**コンセプト**: 原材料の使用量を自動追跡し、AIが在庫切れや発注タイミングを通知

**機能**:
- 原材料ごとの在庫量登録（小麦粉・バターなど）
- 日々の販売数・生産数から消費量を予測
- 在庫が閾値以下になると自動通知（Slack・LINE・メール）
- 発注リスト自動生成（取引業者別）

**業種別応用**:
- パン屋・飲食店: 食材在庫管理
- 製造業: 資材発注自動化
- 小売: 仕入れリマインダー

#### **パック2: 売上予測＆商品分析パック**（予定価格: 月額+¥5,000）

**コンセプト**: レシート写メで自動データ入力 → 人気商品・購買層を自動分析

**機能**:
- 📷 レシートを写メで撮影するだけで自動入力（OCR + AI）
- 🎯 商品ごとの人気度ランキング自動生成
- 👥 年齢層・性別別の購買パターン分析
- 📊 「20代女性に人気の商品TOP5」など自動レポート
- 🤖 AIが「今週はクリームパンが通常の120%売れてます」と通知
- 📱 SNS投稿向けのデータ自動出力

**外部API不要！レシート写メだけで完結**:
```
1. レシートを写メで撮影（スマホアプリ）
2. AIが自動で商品・金額・日時を抽出
3. 顧客情報があれば年齢層も自動紐付け
4. Upmoが自動分析して人気商品を通知
```

**SNSマーケティング活用例**:
- 「今月のベストセラー TOP3」を自動生成
- 「30代女性に大人気の商品」データを公開
- 「週末は◯◯パンが人気です！」の根拠データ

**業種別応用**:
- パン屋: 何がいつ売れるか予測
- 小売: 仕入れ最適化
- 美容室: 予約数予測とスタッフ配置

#### **パック3: LINE CRM分析パック**（予定価格: 月額+¥5,000）

**コンセプト**: LINEポイントカードから自動で購入履歴を取得し、顧客をAIが自動分類

**機能**:
- LINE API連携（外部POS不要！）
- ポイント使用・獲得履歴から購入パターンを自動追跡
- 顧客ごとのRFM分析（Recency・Frequency・Monetary）
- 「常連」「離脱傾向」「新規」「高額顧客」など自動分類
- 顧客セグメント別のLINE通知自動送信

**取得できるデータ**:
```typescript
{
  userId: "U1234567890...",      // LINEユーザーID
  purchaseHistory: [
    { date: "2024-12-01", items: ["食パン", "クロワッサン"], total: 850, points: 8 },
    { date: "2024-12-05", items: ["クリームパン", "コーヒー"], total: 520, points: 5 }
  ],
  lifetimeValue: 50000,          // 総購入額
  visitFrequency: "月4回",        // 来店頻度
  lastVisit: "2024-12-20",       // 最終来店
  customerSegment: "高額常連"      // AI分類
}
```

**業種別応用**:
- パン屋・飲食店: 来店頻度と好みの商品を把握
- 小売店: 購買パターン分析
- 美容室: リピート率と来店間隔の管理

#### **パック4: ワークフロー・自動発注パック**（予定価格: 月額+¥8,000）

**コンセプト**: 人が押していたボタンをAIが押す

**機能**:
- 原材料在庫が閾値以下で発注メール自動送信
- 店舗間の在庫移動リクエストを自動作成
- 管理者に承認依頼をSlack通知
- ワークフロー自動化

**業種別応用**:
- 製造・物流: 発注・承認フロー自動化
- 医療: 消耗品管理＋補充通知

**料金体系**:
```
ベースプラン: ¥25,000/月
+ 在庫アラート: ¥5,000/月
+ 売上予測: ¥5,000/月
+ LINE CRM分析: ¥5,000/月 ※外部POS不要！LINEのみ
+ ワークフロー自動化: ¥8,000/月

初期設定費（業種別調整）: ¥50,000〜¥100,000
```

→ ベース+拡張2〜3個で **¥35,000〜¥40,000/月** が目安

**推奨組み合わせ（導入コスト0円）**:
- **パック2（売上分析）**: レシート写メだけで商品データ自動入力
- **パック3（LINE CRM）**: LINE使ってれば顧客分類も自動

**両方使えば**:
- どの商品が人気か（パック2）
- 誰が買ってるか（パック3）
- その組み合わせで最適な仕入れ・マーケティングが可能

**LINE CRM分析パックの優位性**:
- ✅ 外部POSシステム不要（導入コスト削減）
- ✅ LINE公式アカウントがあれば即開始
- ✅ ポイントカードから自動で購入履歴取得
- ✅ AIが顧客を自動分類（常連・高額・離脱傾向など）
- ✅ セグメント別のLINE通知で営業自動化

**パン屋セットアップパックの中身**:
```
✅ 在庫管理
  - 原材料を登録（小麦粉、バター、卵など）
  - 在庫数が少なくなったらアラート
  - Slack/LINEに通知「バターあと2日分！」

✅ 売上記録（レシートOCR）
  - 1日1回、レシートを写メ
  - AIが自動で商品・金額を読み取り
  - 削れる手作業は全部削る

✅ 商品分析（自動）
  - 「今週の売上TOP5」が自動で出る
  - 「通常より20%売れてる商品」を通知
  - SNS投稿用のデータが自動生成

✅ 発注リマインダー（自動）
  - 在庫が閾値を下回ると自動通知
  - 「発注リスト」を自動生成
```

**追加機能は後から**（使ってみて必要なら追加）:
- LINE CRM: 顧客分析したい人だけ +¥5,000
- 売上予測: もっと精密にしたい人だけ +¥5,000
- ワークフロー: 自動化したい人だけ +¥8,000

**実装の優先順位**:
1. **「パン屋セットアップパック」MVP** ← まずこれだけ作る
2. **追加機能は需要に応じて**

### 最新の更新内容

#### **v1.1.0 - ユーザビリティ改善** (2024年12月)

**主な変更点:**

1. **グラフ機能の削除**
   - JSON入力のユーザビリティ問題を解決
   - より直感的なデータテーブルに統一
   - エラーハンドリングの強化

2. **業種複数選択機能**
   - 1つのアカウントで複数の業種を選択可能に
   - 例: 「製造業」+「小売業」で統合管理
   - 業種間のテンプレート自動マージ

3. **デフォルトコンポーネント自動配置**
   - テンプレートページを開いた時点でコンポーネントが配置済み
   - すぐに使い始められる状態
   - データテーブル、カレンダー、フォームが自動生成

4. **UX改善**
   - 業種選択時に関連する機能を自動表示
   - 複数業種の可視化（タグ表示）
   - エラー回避のための型安全性強化

### 今後の予定

#### **近日公開予定**
- **モバイルアプリ**: iOS・Android対応
- **AI機能強化**: GPT-4統合、カスタムモデル
- **高度な分析**: 予測分析、異常検知
- **ワークフローエンジン**: ビジュアルワークフロー
- **データエクスポート**: Excel、CSVエクスポート機能

#### **ロードマップ**
- **Q1 2025**: モバイルアプリ、AI機能強化
- **Q2 2025**: 高度な分析、予測機能
- **Q3 2025**: ワークフローエンジン、統合強化
- **Q4 2025**: グローバル展開、パートナー連携

---

*最終更新: 2024年12月*
*バージョン: 1.1.0*
